"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getGlobalNameFromModule = void 0;
const config_1 = require("../config");
const importEqualsModule_1 = require("../modules/importEqualsModule");
const importModule_1 = require("./importModule");
const requireModule_1 = require("./requireModule");
const getGlobalNameFromModule = (j, source) => {
    const requireIdentifiers = (0, requireModule_1.getRequireDeclarators)(j, source, config_1.PACKAGE_NAME)
        .filter((declarator) => declarator.value.id.type === "Identifier")
        .nodes();
    if (requireIdentifiers.length > 0 && requireIdentifiers[0].id.type === "Identifier") {
        return requireIdentifiers[0].id.name;
    }
    const importDefaultSpecifiers = (0, importModule_1.getImportSpecifiers)(j, source, config_1.PACKAGE_NAME).filter((importSpecifier) => !importSpecifier.importedName);
    if (importDefaultSpecifiers.length > 0) {
        return importDefaultSpecifiers[0].localName;
    }
    const importEqualsDeclarations = (0, importEqualsModule_1.getImportSpecifiers)(j, source, config_1.PACKAGE_NAME);
    if (importEqualsDeclarations.length > 0) {
        return importEqualsDeclarations[0].localName;
    }
    return undefined;
};
exports.getGlobalNameFromModule = getGlobalNameFromModule;
